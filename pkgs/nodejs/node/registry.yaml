packages:
  - type: http
    repo_owner: nodejs
    repo_name: node
    description: |
      Node.js JavaScript runtime

      # Setup

      To execute tools installed by npm, you need to run the following command:

      ```sh
      eval "$(aqua set-shell <shell name>)"
      ```

      e.g. .bashrc

      ```sh
      eval "$(aqua set-shell bash)"
      ```
    version_constraint: "false"
    version_overrides:
      - version_constraint: "true"
        url: https://nodejs.org/dist/{{.Version}}/node-{{.Version}}-{{.OS}}-{{.Arch}}.{{.Format}}
        format: tar.gz
        replacements:
          amd64: x64
          windows: win
        files:
          - name: corepack
            src: node-{{.Version}}-{{.OS}}-{{.Arch}}/bin/corepack
          - name: node
            src: node-{{.Version}}-{{.OS}}-{{.Arch}}/bin/node
          - name: npm
            src: node-{{.Version}}-{{.OS}}-{{.Arch}}/bin/npm
          - name: npx
            src: node-{{.Version}}-{{.OS}}-{{.Arch}}/bin/npx
        shell:
          env:
            PATH: node-{{.Version}}-{{.OS}}-{{.Arch}}/bin
        overrides:
          - goos: windows
            format: zip
            files:
              - name: corepack
                src: node-{{.Version}}-{{.OS}}-{{.Arch}}/corepack
              - name: node
                src: node-{{.Version}}-{{.OS}}-{{.Arch}}/node
              - name: npm
                src: node-{{.Version}}-{{.OS}}-{{.Arch}}/npm
              - name: npx
                src: node-{{.Version}}-{{.OS}}-{{.Arch}}/npx
        supported_envs:
          - darwin
          - linux
          - amd64
